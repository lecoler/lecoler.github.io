<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
        <meta name="keywords" content="åšå®¢, webå‰ç«¯, JavaScript, css, html, ç¼–ç¨‹, ç¨‹åº, lecoler, é—®é¢˜,">
    
    
        <meta name="description" content="lecolerçš„ä¸ªäººåšå®¢ï¼Œç”¨äºè®°å½•webå‰ç«¯ä»¥åŠå®é™…å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œè¿˜ä¼šæœ‰å„ç§å¼€å‘ä¼˜åŒ–æ–¹æ¡ˆåŠç–‘éš¾æ‚ç—‡">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>
        mpvue è¸©å‘å†ç¨‹ |
        
        lecoleråšå®¢</title>
    
        <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/style.css">
    
        <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
    
    
        <script src="https://hm.baidu.com/hm.js?62da0995840f7bcdbd4e141a4bb18192"></script>
    
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/pace.min.js"></script>
</head>

</html>
<body>

<main class="content over-hidden" id="main">
    <section class="outer">
  <article id="post-mpvue" class="article article-type-post" itemscope
         itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h1 class="article-title" itemprop="name">
      mpvue è¸©å‘å†ç¨‹
    </h1>
  
  




            </header>
        

        
            <div class="article-meta">
                <a href="/2019/09/16/mpvue/" class="article-date">
  <time datetime="2019-09-16T16:00:00.000Z" itemprop="datePublished">2019-09-17</time>
</a>
                
  <div class="article-category">
    <a class="article-category-link" href="/categories/å‰ç«¯/">å‰ç«¯</a>
  </div>

            </div>
        

        <div class="article-entry" itemprop="articleBody">
            

            

            
                <p>å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œä½†è¿«äºåŸç”Ÿå¼€å‘å¯¹å¼€å‘è€…çš„ä¸å‹å¥½ï¼Œäºæ˜¯ä½¿ç”¨åŸºäºvueå¼€å‘çš„mpvueæ¡†æ¶å¼€å‘å¾®ä¿¡å°ç¨‹åºã€‚<br>æœ¬æ–‡æ˜¯ç”¨äºè®°å½•æœ¬äººåœ¨ä½¿ç”¨mpvueæ—¶æ‰€è¸©çš„å‘ï¼Œä»¥åŠä¸€äº›ç»éªŒä¹‹è°ˆã€‚  </p>
<a id="more"></a>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><ul>
<li>æœ¬æ–‡ç”¨çš„æ˜¯ <img src="https://img.shields.io/badge/mpvue-v2.0-brightgreen" alt="mpvue 2.0"> </li>
<li>npmä¸‹è½½æ…¢ï¼Ÿ <a href="https://lecoler.github.io/2019/03/27/npm-cnpm/">ç‚¹è¿™è§£å†³</a><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><a href="https://github.com/Meituan-Dianping/mpvue" target="_blank" rel="noopener">mpvue</a> æ˜¯ç¾å›¢å¼€å‘çš„ä¸€ä¸ªä½¿ç”¨ <code>Vue.js</code> å¼€å‘å°ç¨‹åºçš„å‰ç«¯å¼€æºæ¡†æ¶ã€‚<br>æ¡†æ¶åŸºäº <code>Vue.js</code> æ ¸å¿ƒï¼Œmpvue ä¿®æ”¹äº† <code>Vue.js</code> çš„ <code>runtime</code> å’Œ <code>compiler</code> å®ç°ï¼Œ<br>ä½¿å…¶å¯ä»¥è¿è¡Œåœ¨å°ç¨‹åºç¯å¢ƒä¸­ï¼Œä»è€Œä¸ºå°ç¨‹åºå¼€å‘å¼•å…¥äº†æ•´å¥— <code>Vue.js</code> å¼€å‘ä½“éªŒã€‚<blockquote>
<p>fork è‡ª <code>vuejs/vue@2.4.1</code>ï¼Œä¿ç•™äº† <code>vue runtime</code> èƒ½åŠ›</p>
</blockquote>
<h4 id="mpvueç‰¹æ€§"><a href="#mpvueç‰¹æ€§" class="headerlink" title="mpvueç‰¹æ€§"></a>mpvueç‰¹æ€§</h4></li>
<li>å½»åº•çš„ç»„ä»¶åŒ–å¼€å‘èƒ½åŠ›ï¼šæé«˜ä»£ç å¤ç”¨æ€§</li>
<li>å®Œæ•´çš„ <code>Vue.js</code> å¼€å‘ä½“éªŒ</li>
<li>æ–¹ä¾¿çš„ <code>Vuex</code> æ•°æ®ç®¡ç†æ–¹æ¡ˆï¼šæ–¹ä¾¿æ„å»ºå¤æ‚åº”ç”¨</li>
<li>å¿«æ·çš„ <code>webpack</code> æ„å»ºæœºåˆ¶ï¼šè‡ªå®šä¹‰æ„å»ºç­–ç•¥ã€å¼€å‘é˜¶æ®µ hotReload(çƒ­æ›´æ–°)</li>
<li>æ”¯æŒä½¿ç”¨ <code>npm</code> å¤–éƒ¨ä¾èµ–</li>
<li>ä½¿ç”¨ <code>Vue.js</code> å‘½ä»¤è¡Œå·¥å…· <code>vue-cli</code> å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®</li>
<li>H5 ä»£ç è½¬æ¢ç¼–è¯‘æˆå°ç¨‹åºç›®æ ‡ä»£ç çš„èƒ½åŠ›</li>
</ul>
<h4 id="æ”¯æŒå¹³å°"><a href="#æ”¯æŒå¹³å°" class="headerlink" title="æ”¯æŒå¹³å°"></a>æ”¯æŒå¹³å°</h4><ul>
<li>å¾®ä¿¡å°ç¨‹åº</li>
<li>ç™¾åº¦å°ç¨‹åº</li>
<li>æ”¯ä»˜å®å°ç¨‹åº</li>
<li>å¤´æ¡å°ç¨‹åº</li>
<li>h5</li>
</ul>
<h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>å®‰è£…ç¯å¢ƒéœ€ <img src="https://img.shields.io/badge/node-%3E=8.9.0-brightgreen" alt="node&gt;=8.9"> <img src="https://img.shields.io/badge/npm-%3E=5.6-blue" alt="npm&gt;=5.6"><br>è°ƒè¯•éœ€è¦å¯¹åº”å¹³å°çš„<code>å¼€å‘è€…å·¥å…·</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…</span></span><br><span class="line">npm install -g vue-cli@2.9</span><br><span class="line"><span class="comment">#åˆ›å»º</span></span><br><span class="line">vue init mpvue/mpvue-quickstart myApp</span><br><span class="line"><span class="comment">#ä¾èµ–</span></span><br><span class="line"><span class="built_in">cd</span> myApp</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿è¡Œ</span></span><br><span class="line">npm run dev</span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<h3 id="new-Page"><a href="#new-Page" class="headerlink" title="new Page"></a>new Page</h3><p>éœ€æŒ‰ç‰¹å®šçš„æ ¼å¼å‘½åæ–‡ä»¶(å‚è€ƒç°æœ‰çš„æ–‡ä»¶),ä»¥åŠå¾—åœ¨app.jsoné‡Œé…ç½®ç›¸åº”è·¯å¾„<br>è‡ªå®šä¹‰çš„è¯ï¼Œä¹Ÿå¯ä»¥ï¼Œä¸è¿‡è¦æ”¹çš„åœ°æ–¹æœ‰ç‚¹å¤š<code>main.js</code>ã€<code>webpack</code>é…ç½®ä¹Ÿè¦æ”¹ </p>
<blockquote>
<p>e.g:</p>
<ul>
<li>pageA<ul>
<li>index.vue</li>
<li>main.js(å†™æ³•å›ºå®š)</li>
<li>main.json(å®˜æ–¹å»ºè®®è¦æœ‰ï¼Œä¸ªäººæ„Ÿè§‰å¯æ— )</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="å°†app-json-page-jsonå†™åœ¨-vueé‡Œ"><a href="#å°†app-json-page-jsonå†™åœ¨-vueé‡Œ" class="headerlink" title="å°†app.json/page.jsonå†™åœ¨***.vueé‡Œ"></a>å°†<code>app.json/page.json</code>å†™åœ¨<code>***.vue</code>é‡Œ</h3><p>v2.0ç‰ˆæœ¬ï¼Œå®˜æ–¹å»ºè®®<code>app.json/page.json</code>å¦èµ·ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿˜è¦ç»´æŠ¤å¤šä¸€ä¸ªæ–‡ä»¶å¥½éº»çƒ¦å•Šï¼Œç›´æ¥å†™åœ¨vueé‡Œå¾—äº†ç”¨webpackå¤„ç†ä¸‹</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mpvue-config-loader</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>build/webpack.base.conf.js</code>æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//moduleé‡Œè¿½åŠ rulesï¼Œå¤§æ¦‚åœ¨60è¡Œå·¦å³</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†jséƒ¨åˆ†çš„ configå­—æ®µè½¬åŒ–æˆç›¸åº”çš„jsonæ–‡ä»¶</span></span><br><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">    loader: <span class="string">'mpvue-config-loader'</span>,</span><br><span class="line">    exclude: [resolve(<span class="string">'src/components'</span>)],</span><br><span class="line">    options: &#123;</span><br><span class="line">        entry: <span class="string">'./main.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨  </p>
<ul>
<li><p>æ–¹å¼ä¸€ï¼šå¯è‡ªè¡Œç”Ÿæˆ<code>app.json/main.json</code></p>
</li>
<li><p>æ–¹å¼äºŒï¼šåœ¨<code>.vue</code>é‡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  config:&#123;</span><br><span class="line">      <span class="string">"navigationBarTitleText"</span>: <span class="string">"ç»ƒä¹ "</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šä¸¤ç§æ–¹å¼åªèƒ½é€‰å…¶ä¸€ï¼Œä¸ç„¶ä¼šå‘ç”Ÿè¦†ç›–é”™è¯¯</p>
</blockquote>
<h3 id="å¼•å…¥sass"><a href="#å¼•å…¥sass" class="headerlink" title="å¼•å…¥sass"></a>å¼•å…¥sass</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass sass-loader --save</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…¨å±€ä½¿ç”¨sasså˜é‡(é€‰è£…)</span></span><br><span class="line">npm install sass-resources-loader --save</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹webpacké…ç½®-ä½¿ç”¨å…¨å±€sassæ—¶éœ€ä¿®æ”¹ï¼Œä¸ä½¿ç”¨å°±ä¸ç”¨"><a href="#ä¿®æ”¹webpacké…ç½®-ä½¿ç”¨å…¨å±€sassæ—¶éœ€ä¿®æ”¹ï¼Œä¸ä½¿ç”¨å°±ä¸ç”¨" class="headerlink" title="ä¿®æ”¹webpacké…ç½®(ä½¿ç”¨å…¨å±€sassæ—¶éœ€ä¿®æ”¹ï¼Œä¸ä½¿ç”¨å°±ä¸ç”¨)"></a>ä¿®æ”¹webpacké…ç½®(ä½¿ç”¨å…¨å±€sassæ—¶éœ€ä¿®æ”¹ï¼Œä¸ä½¿ç”¨å°±ä¸ç”¨)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//build/utils.jsæ–‡ä»¶ï¼Œå¤§çº¦70è¡Œå·¦å³</span></span><br><span class="line">scss: generateLoaders(<span class="string">'sass'</span>).concat(&#123;</span><br><span class="line">  loader:<span class="string">'sass-resources-loader'</span>,</span><br><span class="line">    options:&#123;</span><br><span class="line">      resources:path.resolve(__dirname,<span class="string">'../src/libs/base.scss'</span>)  <span class="comment">//è¿™æ˜¯å…¨å±€sassçš„é…ç½®æ–‡ä»¶ï¼Œè·¯å¾„å¯éšæ„æ›´æ”¹</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;),</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>åœ¨è¦ä½¿ç”¨sassçš„vueæ–‡ä»¶é‡Œçš„styleæ ‡ç­¾åŠ ä¸Š<code>lang=&#39;scss&#39;</code> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tip:<br>æ³¨æ„ <code>webpack</code> çš„ç‰ˆæœ¬ï¼Œ<code>webpack</code>ç‰ˆæœ¬è¿‡ä½ï¼Œä½†å®‰è£…çš„ <code>sass</code> ç‰ˆæœ¬è¿‡é«˜æ—¶å¯èƒ½ä¼šå‡ºé”™ã€‚å®‰è£…æ—¶ï¼Œæ³¨æ„æŠ¥é”™ä¿¡æ¯å°±å¥½äº†ğŸ˜‚<br>é™„: æœ¬äººçš„å®‰è£…ç¯å¢ƒ </p>
<ul>
<li>â€œwebpackâ€: â€œ^3.11.0â€,</li>
<li>â€œnode-sassâ€: â€œ^4.11.0â€,</li>
<li>â€œsass-loaderâ€: â€œ^7.1.0â€,</li>
<li>â€œsass-resources-loaderâ€: â€œ^2.0.0â€,</li>
</ul>
</blockquote>
<h3 id="å¼•å…¥vuex"><a href="#å¼•å…¥vuex" class="headerlink" title="å¼•å…¥vuex"></a>å¼•å…¥vuex</h3><p>åˆ›å»ºæ¨¡æ¿æ—¶é€‰æ‹©vuexï¼Œæˆ–è€…è‡ªè¡Œå®‰è£…</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure>

<p><a href="https://lecoler.github.io/2019/06/27/vuex/">vuexçš„ç”¨æ³•</a> åŒvueé‡Œä¸€æ ·ï¼Œåªæ˜¯åœ¨å®ä¾‹ä¸­æŒ‚è½½å¯èƒ½æœ‰æ‰€åŒºåˆ«ã€‚<br>æ–¹å¼ä¸€ï¼šæŒ‰éœ€å¼•å…¥ï¼Œåœ¨è¦ä½¿ç”¨çš„vueæ–‡ä»¶é‡Œ import å¼•å…¥  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•ä¸ªvueæ–‡ä»¶é‡Œ</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼šå…¨å±€å¼•å…¥ï¼Œç›´æ¥æŒ‚è½½åˆ°vueçš„åŸå‹é“¾ä¸Š  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$store = store</span><br></pre></td></tr></table></figure>

<h3 id="æ¥å…¥å¾®ä¿¡äº‘å‡½æ•°"><a href="#æ¥å…¥å¾®ä¿¡äº‘å‡½æ•°" class="headerlink" title="æ¥å…¥å¾®ä¿¡äº‘å‡½æ•°"></a>æ¥å…¥å¾®ä¿¡äº‘å‡½æ•°</h3><p>æ­¥éª¤æœ‰å››     </p>
<ul>
<li><p>å…¶ä¸€:  åœ¨æ ¹ç›®å½•åˆ›å»ºä¸ª äº‘å‡½æ•°ç›®å½• e.g: <code>cloud</code>   </p>
</li>
<li><p>å…¶äºŒ:  ä¿®æ”¹<code>config/index.js</code>é…ç½®æ–‡ä»¶ï¼Œå¤§æ¦‚20è¡Œå·¦å³ï¼Œæ‰¾åˆ°<code>wx</code>å­—æ®µé‡Œçš„<code>platform</code>å­—æ®µï¼Œå°†å€¼æ”¹æˆ<code>platform: &#39;wx/miniprogram&#39;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  wx: &#123;</span><br><span class="line">  template: <span class="string">'wxml'</span>,</span><br><span class="line">  script: <span class="string">'js'</span>,</span><br><span class="line">  style: <span class="string">'wxss'</span>,</span><br><span class="line">  platform: <span class="string">'wx/miniprogram'</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…¶ä¸‰:  ä¿®æ”¹<code>project.config.json</code>å¾®ä¿¡é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œæ–°å¢å­—æ®µ<code>cloudfunctionRoot</code>å’Œä¿®æ”¹<code>miniprogramRoot</code>å­—æ®µ  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"miniprogramRoot"</span>: <span class="string">"./miniprogram/"</span>,</span><br><span class="line">  <span class="attr">"cloudfunctionRoot"</span>: <span class="string">"./cloud/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…¶å››:  ä¿®æ”¹<code>webpack.base.conf.js</code>webpacké…ç½®æ–‡ä»¶ï¼Œæœ«å°¾æ–°å¢ä¸ªifï¼Œå½“æ˜¯å¾®ä¿¡æ—¶æ‰“åŒ…å°†<code>äº‘å‡½æ•°ç›®å½•</code>å’Œ<code>configé¡¹ç›®é…ç½®æ–‡ä»¶</code>copyè¿‡å» </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PLATFORM = process.env.PLATFORM;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/^(swan)|(tt)$/</span>.test(PLATFORM)) &#123;</span><br><span class="line">  baseWebpackConfig = merge(baseWebpackConfig, &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CopyWebpackPlugin([&#123;</span><br><span class="line">        <span class="keyword">from</span>: path.resolve(__dirname, projectConfigMap[PLATFORM]),</span><br><span class="line">        to: path.resolve(config.build.assetsRoot)</span><br><span class="line">      &#125;])</span><br><span class="line">    ]</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">'wx'</span> === PLATFORM) &#123;</span><br><span class="line">  <span class="comment">//äº‘å‡½æ•°</span></span><br><span class="line">  baseWebpackConfig = merge(baseWebpackConfig, &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CopyWebpackPlugin([&#123;</span><br><span class="line">        <span class="keyword">from</span>: path.resolve(__dirname, projectConfigMap.tt),</span><br><span class="line">        to: path.resolve(__dirname, <span class="string">'../dist/wx/'</span>)</span><br><span class="line">      &#125;]),</span><br><span class="line">      <span class="keyword">new</span> CopyWebpackPlugin([&#123;</span><br><span class="line">        <span class="keyword">from</span>: path.resolve(__dirname, <span class="string">'../apiCloud'</span>),</span><br><span class="line">        to: path.resolve(__dirname, <span class="string">'../dist/wx/cloud'</span>)</span><br><span class="line">      &#125;])</span><br><span class="line">    ]</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ€å:  run <code>dist/wx</code>ç›®å½•é‡Œå‡ºç°<code>cloud</code>ã€<code>miniprogram</code>ã€<code>project.config.json</code>ï¼Œå°±æˆåŠŸäº†</p>
<blockquote>
<p>Tip:  </p>
<ul>
<li>äº‘å‡½æ•°çš„æ·»åŠ æ–¹æ³•ï¼Œç¼–è¯‘å®Œäº†è¿˜æ˜¯å¾—åœ¨<code>å¾®ä¿¡å¼€å‘è€…å·¥å…·</code>é‡Œæ›´æ–°æäº¤â˜¹ </li>
<li><code>project.config.json</code>æ–‡ä»¶ï¼Œæœ€å¥½å°†<code>appid</code>å­—æ®µå¡«æ­£ç¡®ï¼Œä¸ç„¶æ¯æ¬¡run <code>project.config.json</code>éƒ½ä¼šè¢«æ›¿æ¢ï¼Œä¼šæç¤º<code>appid</code>ä¸ä¸€è‡´ğŸ˜‚  </li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="å‘ğŸ˜ "><a href="#å‘ğŸ˜ " class="headerlink" title="å‘ğŸ˜ "></a>å‘ğŸ˜ </h3><h4 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h4><p>åŒ vueï¼Œä¸åŒçš„æ˜¯åœ¨å°ç¨‹åº <code>onReady</code> åï¼Œå†å»è§¦å‘ <code>vue mounted</code> ç”Ÿå‘½å‘¨æœŸ  </p>
<blockquote>
<p>åŒæ—¶è¿˜å…¼å®¹äº†å¾®ä¿¡å°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†ä¸å»ºè®®ä½¿ç”¨</p>
</blockquote>
<hr>
<h4 id="ä¸æ”¯æŒ-BOMï¼DOM-æ“ä½œ"><a href="#ä¸æ”¯æŒ-BOMï¼DOM-æ“ä½œ" class="headerlink" title="ä¸æ”¯æŒ BOMï¼DOM æ“ä½œ"></a>ä¸æ”¯æŒ <code>BOMï¼DOM</code> æ“ä½œ</h4><p>å°ç¨‹åºé‡Œæ‰€æœ‰çš„ BOMï¼DOM éƒ½ä¸èƒ½ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>v-html</code> æŒ‡ä»¤ä¸èƒ½ç”¨</p>
<hr>
<h4 id="å¤æ‚çš„-JavaScript-æ¸²æŸ“è¡¨è¾¾å¼å¯èƒ½ä¼šå‡ºé—®é¢˜"><a href="#å¤æ‚çš„-JavaScript-æ¸²æŸ“è¡¨è¾¾å¼å¯èƒ½ä¼šå‡ºé—®é¢˜" class="headerlink" title="å¤æ‚çš„ JavaScript æ¸²æŸ“è¡¨è¾¾å¼å¯èƒ½ä¼šå‡ºé—®é¢˜"></a>å¤æ‚çš„ <code>JavaScript</code> æ¸²æŸ“è¡¨è¾¾å¼å¯èƒ½ä¼šå‡ºé—®é¢˜</h4><blockquote>
<p>æ¸²æŸ“æ—¶ä¼šæŠŠ <code>template</code> ä¸­çš„åŒèŠ±æ‹¬å·çš„éƒ¨åˆ†ï¼Œç›´æ¥ç¼–ç åˆ° <code>wxml</code> æ–‡ä»¶ä¸­ï¼Œç”±äºå¾®ä¿¡å°ç¨‹åºçš„èƒ½åŠ›é™åˆ¶(æ•°æ®ç»‘å®š)ï¼Œæ‰€ä»¥æ— æ³•æ”¯æŒå¤æ‚çš„ <code>JavaScript è¡¨è¾¾å¼</code>  </p>
</blockquote>
<hr>
<h4 id="ä¸èƒ½åœ¨-template-å†…ä½¿ç”¨-methods-ä¸­çš„å‡½æ•°"><a href="#ä¸èƒ½åœ¨-template-å†…ä½¿ç”¨-methods-ä¸­çš„å‡½æ•°" class="headerlink" title="ä¸èƒ½åœ¨ template å†…ä½¿ç”¨ methods ä¸­çš„å‡½æ•°"></a>ä¸èƒ½åœ¨ <code>template</code> å†…ä½¿ç”¨ <code>methods</code> ä¸­çš„å‡½æ•°</h4><p>èƒ½ç”¨è®¡ç®—å±æ€§<code>computed</code>å°±ç”¨è®¡ç®—å±æ€§å§</p>
<hr>
<h4 id="mpvueä¸æ”¯æŒè‡ªå®šä¹‰tabBar"><a href="#mpvueä¸æ”¯æŒè‡ªå®šä¹‰tabBar" class="headerlink" title="mpvueä¸æ”¯æŒè‡ªå®šä¹‰tabBar"></a>mpvueä¸æ”¯æŒè‡ªå®šä¹‰tabBar</h4><p>æ–¹å¼1: ç”¨å¾®ä¿¡å®˜æ–¹çš„è‡ªå®šä¹‰tabBarå†™ä¸ªåŸç”Ÿçš„tabBarï¼Œä¿®æ”¹webpacké…ç½®ï¼Œcopyè¿‡å»   </p>
<p>é—®é¢˜ï¼š è‡ªå®šä¹‰tabBarä¼šåœ¨æ¯ä¸ªé¡µé¢éƒ½å­˜åœ¨ï¼ˆç¬‘ï¼‰ï¼Œåªèƒ½ç”¨å®˜æ–¹æä¾›çš„<code>wx.hideTabBar()</code>éšè—ï¼Œä»¥åŠtabBaré€‰ä¸­çŠ¶æ€å¾—åœ¨å½“å‰é¡µé¢ç”¨<code>getTabBar</code>æ›´æ”¹é€‰æ‹©çŠ¶æ€ï¼Œ<br>ä½†æ˜¯å¥½åƒ<code>getTabBar</code>è¿™ä¸ªè·å–ä¸åˆ°å®ä¾‹ï¼ˆä¸çŸ¥æ˜¯ä¸æ˜¯æˆ‘çš„æ“ä½œæœ‰è¯¯ï¼‰  </p>
<p>æ–¹å¼2ï¼šå…ˆè‡ªå®šä¹‰ä¸ªVueç»„ä»¶åštabBarï¼Œæ¥ç€åœ¨<code>app.json</code>é‡Œæ–°å¢ä¸ª<code>tabBar</code>å­—æ®µé…ç½®æƒ…å†µåŒvueç»„ä»¶ï¼Œç„¶ååœ¨<code>App.vue</code>é‡Œç”¨<code>wx.hideTabBar()</code>éšè—åŸç”Ÿçš„ï¼Œ<br>vueç»„ä»¶é‡Œçš„tabåˆ‡æ¢å…¨éƒ¨ç”¨<code>wx.switchTab()</code>    </p>
<p>é—®é¢˜:  åº•éƒ¨å¯¼èˆªæ åˆæ¬¡åˆ‡æ¢æ—¶ï¼Œä¼šå‘ç”Ÿé—ªçƒ </p>
<hr>
<h4 id="mpvueä¸æ”¯æŒslot-scopeï¼Œè¿ç”¨å¤šä¸ªslotæ—¶éƒ½å¯èƒ½å­˜åœ¨é—®é¢˜"><a href="#mpvueä¸æ”¯æŒslot-scopeï¼Œè¿ç”¨å¤šä¸ªslotæ—¶éƒ½å¯èƒ½å­˜åœ¨é—®é¢˜" class="headerlink" title="mpvueä¸æ”¯æŒslot-scopeï¼Œè¿ç”¨å¤šä¸ªslotæ—¶éƒ½å¯èƒ½å­˜åœ¨é—®é¢˜"></a>mpvueä¸æ”¯æŒslot-scopeï¼Œè¿ç”¨å¤šä¸ªslotæ—¶éƒ½å¯èƒ½å­˜åœ¨é—®é¢˜</h4><hr>
<h4 id="ç»„ä»¶ä¸Šä¸æ”¯æŒv-show"><a href="#ç»„ä»¶ä¸Šä¸æ”¯æŒv-show" class="headerlink" title="ç»„ä»¶ä¸Šä¸æ”¯æŒv-show"></a>ç»„ä»¶ä¸Šä¸æ”¯æŒv-show</h4><hr>
<h4 id="ç»„ä»¶åµŒå¥—å­˜åœ¨é—®é¢˜"><a href="#ç»„ä»¶åµŒå¥—å­˜åœ¨é—®é¢˜" class="headerlink" title="ç»„ä»¶åµŒå¥—å­˜åœ¨é—®é¢˜"></a>ç»„ä»¶åµŒå¥—å­˜åœ¨é—®é¢˜</h4><p>ç®€å•åµŒå¥—æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¤ªå¤æ‚çš„å¯èƒ½å‡ºé”™ï¼Œå…·ä½“æ ‡å‡†ä¸çŸ¥é“ï¼Œå¾—çœ‹è„¸  </p>
<hr>
<h4 id="ç»„ä»¶ä½¿ç”¨slotæ—¶éœ€é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸”æ¯æ¬¡æ›´æ–°slotçš„æ’å…¥å€¼ä¹Ÿéœ€é‡æ–°ç¼–è¯‘"><a href="#ç»„ä»¶ä½¿ç”¨slotæ—¶éœ€é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸”æ¯æ¬¡æ›´æ–°slotçš„æ’å…¥å€¼ä¹Ÿéœ€é‡æ–°ç¼–è¯‘" class="headerlink" title="ç»„ä»¶ä½¿ç”¨slotæ—¶éœ€é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸”æ¯æ¬¡æ›´æ–°slotçš„æ’å…¥å€¼ä¹Ÿéœ€é‡æ–°ç¼–è¯‘"></a>ç»„ä»¶ä½¿ç”¨slotæ—¶éœ€é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸”æ¯æ¬¡æ›´æ–°slotçš„æ’å…¥å€¼ä¹Ÿéœ€é‡æ–°ç¼–è¯‘</h4><p>è¯´å¥½çš„çƒ­æ›´æ–°å‘¢ğŸ˜   </p>
<hr>
<h4 id="è‡ªå®šä¹‰ç»„ä»¶ä¸æ”¯æŒv-model"><a href="#è‡ªå®šä¹‰ç»„ä»¶ä¸æ”¯æŒv-model" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶ä¸æ”¯æŒv-model"></a>è‡ªå®šä¹‰ç»„ä»¶ä¸æ”¯æŒv-model</h4><hr>
<h4 id="æ”¹åŠ¨app-jsonæ—¶éœ€é‡æ–°ç¼–è¯‘"><a href="#æ”¹åŠ¨app-jsonæ—¶éœ€é‡æ–°ç¼–è¯‘" class="headerlink" title="æ”¹åŠ¨app.jsonæ—¶éœ€é‡æ–°ç¼–è¯‘"></a>æ”¹åŠ¨app.jsonæ—¶éœ€é‡æ–°ç¼–è¯‘</h4><p>è¯´å¥½çš„çƒ­æ›´æ–°å‘¢ğŸ˜   </p>
<hr>
<h4 id="iosä¸å®‰å“æ»šåŠ¨åŠ¨ç”»æ—¶é•¿ä¸ä¸€è‡´ï¼Œå¾®ä¿¡apiç›‘å¬å±å¹•æ»šåŠ¨è§¦å‘æ—¶æœºä¸ä¸€è‡´"><a href="#iosä¸å®‰å“æ»šåŠ¨åŠ¨ç”»æ—¶é•¿ä¸ä¸€è‡´ï¼Œå¾®ä¿¡apiç›‘å¬å±å¹•æ»šåŠ¨è§¦å‘æ—¶æœºä¸ä¸€è‡´" class="headerlink" title="iosä¸å®‰å“æ»šåŠ¨åŠ¨ç”»æ—¶é•¿ä¸ä¸€è‡´ï¼Œå¾®ä¿¡apiç›‘å¬å±å¹•æ»šåŠ¨è§¦å‘æ—¶æœºä¸ä¸€è‡´"></a>iosä¸å®‰å“æ»šåŠ¨åŠ¨ç”»æ—¶é•¿ä¸ä¸€è‡´ï¼Œå¾®ä¿¡apiç›‘å¬å±å¹•æ»šåŠ¨è§¦å‘æ—¶æœºä¸ä¸€è‡´</h4><p>è¿™ä¸ªä¸ç®—mpvueçš„å‘ï¼Œç®—äº†ä¸ç®¡ï¼Œè®°å½•ä¸‹æ¥ï¼Œå½“åˆå‘äº†æˆ‘å¥½ä¹…  </p>
<hr>
<h4 id="nextTickå¹¶ä¸æ˜¯æ¸²æŸ“å®Œæˆåæ‰§è¡Œï¼Œä»…ä»…åªæ˜¯ä¸ªå»¶æ—¶å™¨ï¼ˆæ€•ä¸æ˜¯ä¸ªå‡çš„å§ï¼‰"><a href="#nextTickå¹¶ä¸æ˜¯æ¸²æŸ“å®Œæˆåæ‰§è¡Œï¼Œä»…ä»…åªæ˜¯ä¸ªå»¶æ—¶å™¨ï¼ˆæ€•ä¸æ˜¯ä¸ªå‡çš„å§ï¼‰" class="headerlink" title="nextTickå¹¶ä¸æ˜¯æ¸²æŸ“å®Œæˆåæ‰§è¡Œï¼Œä»…ä»…åªæ˜¯ä¸ªå»¶æ—¶å™¨ï¼ˆæ€•ä¸æ˜¯ä¸ªå‡çš„å§ï¼‰"></a>nextTickå¹¶ä¸æ˜¯æ¸²æŸ“å®Œæˆåæ‰§è¡Œï¼Œä»…ä»…åªæ˜¯ä¸ªå»¶æ—¶å™¨ï¼ˆæ€•ä¸æ˜¯ä¸ªå‡çš„å§ï¼‰</h4><p>çœ‹äº†ä¸‹åŸæ¥å®˜æ–¹çš„ä¹Ÿæ˜¯è¿™æ ·çš„ </p>
<blockquote>
<p><code>wx.nextTick()</code> å»¶è¿Ÿä¸€éƒ¨åˆ†æ“ä½œåˆ°ä¸‹ä¸€ä¸ªæ—¶é—´ç‰‡å†æ‰§è¡Œã€‚ï¼ˆç±»ä¼¼äº setTimeoutï¼‰</p>
</blockquote>
<hr>
<h4 id="mpvueé¡µé¢æ•°æ®ä¸ç»„ä»¶å¹¶ä¸ä¼šéšé¡µé¢é”€æ¯è€Œåˆå§‹åŒ–"><a href="#mpvueé¡µé¢æ•°æ®ä¸ç»„ä»¶å¹¶ä¸ä¼šéšé¡µé¢é”€æ¯è€Œåˆå§‹åŒ–" class="headerlink" title="mpvueé¡µé¢æ•°æ®ä¸ç»„ä»¶å¹¶ä¸ä¼šéšé¡µé¢é”€æ¯è€Œåˆå§‹åŒ–"></a>mpvueé¡µé¢æ•°æ®ä¸ç»„ä»¶å¹¶ä¸ä¼šéšé¡µé¢é”€æ¯è€Œåˆå§‹åŒ–</h4><p>é¡µé¢æ•°æ®åªèƒ½è‡ªå·±æ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆä¸€ä¸ªä¸€ä¸ªthiséš¾é“ä¸ç´¯ä¹ˆï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»ºè®®å°è£…æŒ‚è½½åˆ°å…¨å±€ï¼Œæ¯•ç«Ÿæ¯æ¬¡éƒ½è¦ç”¨</span></span><br><span class="line"><span class="built_in">Object</span>.assign(<span class="keyword">this</span>.$data, <span class="keyword">this</span>.$options.data());</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶åªèƒ½è‡ªå·±æ‰‹åŠ¨é”€æ¯</p>
<hr>
<h4 id="è·å–é¡µé¢ä¼ å‚è¿‡æ¥çš„ä¿¡æ¯"><a href="#è·å–é¡µé¢ä¼ å‚è¿‡æ¥çš„ä¿¡æ¯" class="headerlink" title="è·å–é¡µé¢ä¼ å‚è¿‡æ¥çš„ä¿¡æ¯"></a>è·å–é¡µé¢ä¼ å‚è¿‡æ¥çš„ä¿¡æ¯</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»ºè®®å°è£…æŒ‚è½½åˆ°å…¨å±€ï¼Œæ¯•ç«Ÿæ¯æ¬¡éƒ½è¦ç”¨</span></span><br><span class="line"><span class="keyword">this</span>.$root.$mp.query[name]</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="å¤§éƒ¨åˆ†åŸç”Ÿçš„äº‹ä»¶å“åº”eventéƒ½åœ¨event-mp-detailé‡Œ"><a href="#å¤§éƒ¨åˆ†åŸç”Ÿçš„äº‹ä»¶å“åº”eventéƒ½åœ¨event-mp-detailé‡Œ" class="headerlink" title="å¤§éƒ¨åˆ†åŸç”Ÿçš„äº‹ä»¶å“åº”eventéƒ½åœ¨event.mp.detailé‡Œ"></a>å¤§éƒ¨åˆ†åŸç”Ÿçš„äº‹ä»¶å“åº”<code>event</code>éƒ½åœ¨<code>event.mp.detail</code>é‡Œ</h4><hr>
<h4 id="bind-å’Œ-catch-äº‹ä»¶åŒæ—¶ç»‘å®šæ—¶ï¼Œåªä¼šè§¦å‘-bind-catch-ä¸ä¼šè¢«è§¦å‘"><a href="#bind-å’Œ-catch-äº‹ä»¶åŒæ—¶ç»‘å®šæ—¶ï¼Œåªä¼šè§¦å‘-bind-catch-ä¸ä¼šè¢«è§¦å‘" class="headerlink" title="bind å’Œ catch äº‹ä»¶åŒæ—¶ç»‘å®šæ—¶ï¼Œåªä¼šè§¦å‘ bind ,catch ä¸ä¼šè¢«è§¦å‘"></a><code>bind</code> å’Œ <code>catch</code> äº‹ä»¶åŒæ—¶ç»‘å®šæ—¶ï¼Œåªä¼šè§¦å‘ <code>bind</code> ,<code>catch</code> ä¸ä¼šè¢«è§¦å‘</h4><hr>
<h4 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h4><ul>
<li><code>.stop</code> å¯ä»¥é˜»æ­¢å†’æ³¡ï¼Œä½†ç»‘å¤šä¸€ä¸ªéå†’æ³¡äº‹ä»¶æ—¶ä¼šå¤±æ•ˆ</li>
<li><code>.once</code> ä¸èƒ½ç”¨</li>
</ul>
<h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><blockquote>
<p>ç›®å‰è¸©åˆ°çš„å‘å°±è¿™äº›ï¼Œæœ‰äº›å¯èƒ½å¿˜è®°äº†ï¼Œç­‰é‡åˆ°æƒ³èµ·æ¥å†æ¥è¡¥å……ã€‚<br>äº†è§£æ›´å¤šçš„å¯ä»¥çœ‹<a href="http://mpvue.com/mpvue/" target="_blank" rel="noopener">å®˜ç½‘æ–‡æ¡£</a>ï¼Œæ–‡æ¡£é‡Œæ²¡å†™ï¼Ÿå¯ä»¥å»<a href="https://github.com/Meituan-Dianping/mpvue/issues" target="_blank" rel="noopener">issues</a>çœ‹çœ‹  </p>
</blockquote>
<p>é™„:<br>     ä¸ªäººå¼€å‘æ—¶å¸¸ç”¨å°è£… </p>
<ul>
<li><p>/ibs/utils.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–é¡µé¢æ¶ˆæ¯å‚æ•°</span></span><br><span class="line"><span class="comment">   * @param name</span></span><br><span class="line"><span class="comment">   * å‚æ•°å</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  getQuery(name) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$root.$mp.query[name];</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">      åˆå§‹åŒ–dataæ•°æ®ï¼ˆç”±äºmpvueåœ¨ç»„ä»¶é”€æ¯æ—¶æ²¡æœ‰åˆå§‹åŒ–dataï¼Œéœ€æ‰‹åŠ¨initï¼‰</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>.$data, <span class="keyword">this</span>.$options.data());</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·³è½¬é¡µé¢</span></span><br><span class="line"><span class="comment">   * @param id  æ–‡ä»¶ç›®å½•çš„åå­—,å¦‚ /pages/index/main ä¸­çš„ index å³æ—¶ ç§°ä¸º id</span></span><br><span class="line"><span class="comment">   *            (é¡µé¢å‘½åå¾—æŒ‰ç…§å›ºå®šæ ¼å¼)</span></span><br><span class="line"><span class="comment">   * @param  param  é¡µé¢ä¼ é€’é—´çš„å‚æ•°, Object</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  toPage(id, param = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!id) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(param);</span><br><span class="line">    <span class="keyword">if</span> (keys.length) &#123;</span><br><span class="line">      str += <span class="string">`?`</span>;</span><br><span class="line">      keys.forEach(<span class="function"><span class="params">i</span> =&gt;</span> &#123;</span><br><span class="line">        str += <span class="string">`<span class="subst">$&#123;i&#125;</span>=<span class="subst">$&#123;param[i]&#125;</span>&amp;`</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      str = str.slice(<span class="number">0</span>, str.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url: <span class="string">`/pages/<span class="subst">$&#123;id&#125;</span>/main<span class="subst">$&#123;str&#125;</span>`</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"> </span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¿«é€Ÿæ˜¾ç¤ºæ¶ˆæ¯æ¡†</span></span><br><span class="line"><span class="comment">   * @param msg</span></span><br><span class="line"><span class="comment">   * æ¶ˆæ¯å†…å®¹</span></span><br><span class="line"><span class="comment">   * @param opts</span></span><br><span class="line"><span class="comment">   * é¢å¤–å‚æ•°</span></span><br><span class="line"><span class="comment">   *  icon</span></span><br><span class="line"><span class="comment">   * æ¶ˆæ¯å›¾æ ‡ é»˜è®¤æ²¡æœ‰</span></span><br><span class="line"><span class="comment">   *  time</span></span><br><span class="line"><span class="comment">   * æŒç»­æ—¶é—´ é»˜è®¤1500ms</span></span><br><span class="line"><span class="comment">   *  done</span></span><br><span class="line"><span class="comment">   * æ–‡å­—æ¶ˆå¤±æ—¶çš„å›è°ƒ é»˜è®¤ false</span></span><br><span class="line"><span class="comment">   *    @return  Promise</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  showMessage(msg, opts) &#123;</span><br><span class="line">    <span class="keyword">const</span> flag = msg.constructor == <span class="built_in">String</span> || msg.constructor == <span class="built_in">Number</span>;</span><br><span class="line">    opts = opts || &#123;&#125;;</span><br><span class="line">    opts.time = opts.time || <span class="number">1500</span>;</span><br><span class="line">    wx.showToast(&#123;</span><br><span class="line">      title: flag ? msg : <span class="string">'å‚æ•°æ ¼å¼ä¸æ­£ç¡®'</span>,</span><br><span class="line">      icon: opts.icon || <span class="string">'none'</span>,</span><br><span class="line">      duration: opts.time</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (opts.done) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, opts.time));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ˜¾ç¤ºloading</span></span><br><span class="line"><span class="comment">   * @param msg</span></span><br><span class="line"><span class="comment">   * æ¶ˆæ¯å†…å®¹, é»˜è®¤ 'æ­£åœ¨åŠ è½½'</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  showLoading(msg = <span class="string">'æ­£åœ¨åŠ è½½'</span>) &#123;</span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      title: msg,</span><br><span class="line">      mask: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¢„è§ˆå›¾ç‰‡</span></span><br><span class="line"><span class="comment">   * å›¾ç‰‡urlæ•°ç»„</span></span><br><span class="line"><span class="comment">   * @param array</span></span><br><span class="line"><span class="comment">   * @param index</span></span><br><span class="line"><span class="comment">   * æ•°ç»„ä¸‹æ ‡,æ˜¾ç¤ºç¬¬å‡ å¼ å›¾ç‰‡,é»˜è®¤ç¬¬ä¸€å¼ </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  previewImage(array, index = <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> url = array[index];</span><br><span class="line">      wx.previewImage(&#123;</span><br><span class="line">        current: url,</span><br><span class="line">        urls: array,</span><br><span class="line">        success: resolve,</span><br><span class="line">        fail: reject</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> utils <span class="keyword">from</span> <span class="string">'./libs/utils'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‚è½½å…¨å±€å·¥å…·é›†</span></span><br><span class="line">Vue.prototype.$utils = utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é¡µé¢æ¶ˆæ¯å‚æ•°</span></span><br><span class="line">Vue.prototype.$getQuery = utils.getQuery;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–é¡µé¢å†…data</span></span><br><span class="line">Vue.prototype.$init = utils.init;</span><br></pre></td></tr></table></figure>


</li>
</ul>

            
        </div>
        <footer class="article-footer">
            
                
    <div id="copyright">
        <div>
            <b>åŸæ–‡ä½œè€…ï¼š </b>
            lecoler
        </div>
        <div>
            <b>åŸæ–‡é“¾æ¥ï¼š </b>
            <a href=" https://lecoler.github.io/2019/09/16/mpvue/" target="_blank"> https://lecoler.github.io/2019/09/16/mpvue/ </a>
        </div>
        <div>
            <b> ç‰ˆæƒå£°æ˜ï¼š </b>
            æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 </a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </div>
    </div>


            
            <a data-url="https://lecoler.github.io/2019/09/16/mpvue/" data-id="ckp6qde88003g7ilr6923k7kt"
               class="article-share-link">åˆ†äº«</a>
            
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/å°ç¨‹åº/">å°ç¨‹åº</a></li></ul>

        </footer>

    </div>

    
        
  <nav class="article-nav">
    
      <a href="/2020/01/15/android-serialPort/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            å®‰å“ä¸²å£é€šè®¯ï¼ˆæ¨¡æ‹Ÿæœºæµ‹è¯•ï¼‰
          
        </div>
      </a>
    
    
      <a href="/2019/06/26/vuex/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">Vuexå…¥é—¨</div>
      </a>
    
  </nav>


    

    
        
            <div class="width-full flex-column-center rel" id="donate">
    <div class="donate-text rel">
        <span class="flex-column-center abs"><i class="fe fe-heart-o"></i>æ‰“èµ</span>
        <span class="abs break-nowrap">æ¬£èµæ­¤æ–‡ï¼Ÿè¯·ä½œè€…å–æ¯å’–å•¡ï¼</span>
    </div>
    <div class="donate-box flex-center rel">
        <a id="aliPay" title="æ”¯ä»˜å®ä»˜æ¬¾ç "></a>
        <a id="weChat" title="å¾®ä¿¡ä»˜æ¬¾ç "></a>
    </div>
    <div id="donate-qrBox" class="hidden abs over-hidden hideQR"></div>
    <img src="/images/zfb.jpg" class="hidden" />
    <img src="/images/wx.jpg" class="hidden" />
</div>
<script>
    let qr = {
        aliPay: '/images/zfb.jpg',
        weChat: '/images/wx.jpg',
    };
    let qrBox = $('#donate-qrBox');
    qrBox.click(() => {
        qrBox.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', () => {
            qrBox.addClass('hidden');
        }).toggleClass('showQR hideQR', 0)
    });
    $('#donate>.donate-box>a').click(function () {
        qrBox.css('background-image', 'url(' + qr[$(this).attr('id')] + ')').unbind('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend').toggleClass('hidden showQR hideQR', 1);
    });
</script>

        
        <div class="directory">
    <div class="height-full fix" id="directory-list"></div>
    <div class="fix flex-center active" id="directory-btn">
        <a title="ç›®å½•"><i class="fe fe-book"></i></a>
    </div>
</div>
<script>
    const $html = $('.article-entry').children();
    const $list = $('#directory-list').empty();
    const $btn = $('#directory-btn').on('click',()=>{
        $list.toggleClass('active')
    })
    const Tags = ['H1','H2','H3','H4','H5','H6','H7']
    for(let dom of $html.toArray()){
        let type
        if (Tags.some((i, k) => i == $(dom).get(0).tagName && (type = k + 1))) {
            const id = $(dom).attr('id');
            const $a = $(`<a href="#${id}" title="${id}" class="block break-ellipsis">${id}</a>`).css({
                'padding-left': `${(type-1)*0.5}rem`,
                'font-size': `${1.6 - type * 0.02}rem`,
                'text-decoration': 'none',
                'color': '#fff',
            })
            $list.append($a);
        }
    }
</script>

        
    <div id="vcomments"></div>
    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
    <script type="text/javascript">
      new Valine({
            el: '#vcomments',
            appId: 'TblyYUGKjeqtAejC6buEAYiw-gzGzoHsz',
            appKey: 'FoUxsfWPrMCqDswWNoTIO1Dc',
            placeholder: 'å›å¤',
            avatar: 'retro',
            visitor: 'true'
        })
    </script>
  
  
        <script>
    const items = $('.highlight', '.article-entry');
    const list = items && items.toArray();
    for (let item of list) {
        let copyText;
        const code = item.getElementsByClassName('code')[0];
        if (code) {
            copyText = code.innerText;
        }
        const copyBtn = $('<button>å¤åˆ¶</button>');
        copyBtn.css({
            position: 'absolute',
            right: '10px',
            top: '10px',
            cursor: 'pointer'
        });
        copyBtn.on('click', function () {
            if (copyText) {
                const dom = $(`<textarea >${copyText}</textarea>`);
                dom.css({
                    opacity: 0,
                    position: 'absolute',
                    width: '1px',
                    height: '1px'
                });
                this.appendChild(dom.get(0));
                dom.select();
                !document.execCommand('Copy') && alert('æŠ±æ­‰ï¼Œæµè§ˆå™¨ä¸æ”¯æŒå¤åˆ¶åŠŸèƒ½');
                dom.remove();
            }
        })
        item.appendChild(copyBtn.get(0));
    }
</script>
    

</article>




</section>
    <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
    <li>
        <i class="fe fe-bar-chart"></i>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>
        </span>
    </li>
    <li>
        <i class="fe fe-smile-alt"></i>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>
        </span>
    </li>
</ul>

    </div>
    <ul class="list-inline">
      <li>&copy; 2017 - 2021 lecoleråšå®¢</li>
      <li>ç”± <a href="http://hexo.io/" target="_blank">Hexo</a> é©±åŠ¨</li>
      <li>è‡ªåˆ¶ä¸»é¢˜ - zero æ˜¯åŸºäº <a href="https://github.com/zhwangart/hexo-theme-ocean" target="_blank">Ocean</a> äºŒæ¬¡å¼€å‘</li>
    </ul>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
    <button class="navbar-toggle"></button>

<nav class="navbar">
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">ä¸»é¡µ</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">å½’æ¡£</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">å…³äº</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="æœç´¢"><i class="fe fe-search"></i>æœç´¢</a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="æœç´¢å…³é”®å­—...">
  <div id="local-search-result" class="local-search-result"></div>
</div>

</div>

</aside>
<script src="/js/lazyload.min.js"></script>
<script src="/js/zero.js"></script>

    <script src="/fancybox/jquery.fancybox.min.js"></script>




    <script src="/js/search.js"></script>



    <script src="https://cdn.bootcss.com/canvas-nest.js/2.0.4/canvas-nest.js"
            color="0,0,0"
            opacity='0.5'
            zIndex="-1"
            count="20"></script>


<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</body>
</html>
